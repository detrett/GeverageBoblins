@using Microsoft.AspNetCore.Identity
@using System.Security.Claims;
@model Thread
    <!--Subforum Title-->
<div class="row">
    <div class="col" id="title">
        <h1 class="title-font">@Model.ParentSubforum.Name</h1>
    </div>
</div>

<!--Start of Thread Container-->
<section class="">
    <div class="thread-container background-dark card row">

        <!--Thread title-->
        <div class="row">
            <div class="col-3">
                <h2 class="thread-page-title">@Model.Name</h2>
            </div>

            @{
                // CHANGEME
                if (@Model.UserId == 5)
                {
                    <div class="col-1 mr-50">
                        <button type="button" class="btn card-body std-purple-btn" data-bs-keyboard="false" data-bs-backdrop="static" data-bs-toggle="modal"
                                data-bs-target="#editThread" id="editThreadBtn">
                            <i class="fa-solid fa-file-pen"></i>
                            Edit Topic
                        </button>
                    </div>
                }
                // CHANGEME
                if (@Model.UserId == 5)
                {
                    <div class="col-1">
                        <button type="button" class="btn card-body std-pink-btn w-100" data-bs-keyboard="false" data-bs-backdrop="static" data-bs-toggle="modal"
                                data-bs-target="#deleteThread" id="deleteThreadBtn">
                            <i class="fa-solid fa-trash"></i>
                            Delete
                        </button>
                    </div>
                }
            }
        </div>

        @{
            foreach (var comment in Model.Comments)
            {
                @await Html.PartialAsync("_CommentList", comment);
            }
        }
        @{
            if (!User.Identity.IsAuthenticated)
            {

                var newComment = new Comment();
                newComment.Thread = Model;
                newComment.ThreadId = Model.ThreadId;
                newComment.UserId = 5;
                newComment.Title = Model.Name;

                @await Html.PartialAsync("_CommentBox", newComment);

            }
            else
            {
                <!--guest teaser (guest only)-->
                <section class="background-light card comment-container guest-only">

                    @await Html.PartialAsync("_GuestTeaser"); 
                    
                </section>
                <!--end of guest teaser (guest only)-->
            }
        }

    </div>
</section>
<!--End of Thread Container-->
<!--Go back to thread list-->
<div class="pager-container topic-listing-link">
    <a asp-action="container" asp-controller="subforum" asp-route-id="@Model.ParentSubforum.SubforumId">
        <i class="fa-solid fa-chevron-left"></i> Go back to topic listing
    </a>
</div>



<!--Back to top button-->
<a href="" id="back-to-top-button" data-bs-toggle="tooltip" title="Back to top"></a>
